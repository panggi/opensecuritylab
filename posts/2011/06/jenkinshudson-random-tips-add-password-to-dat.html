<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<link href='../../../exports.css' rel='stylesheet'>
<link href='../../../exports.css' rel='stylesheet'>

</head>
<body>
<div id='wrap'>
<div id='header'>
<h1>Open Security Laboratory</h1>
<h2>This is an archived post
This is an archived post
</h2>
</div>
<div id='content'><div id='nav'>
<a href="../../../posts/2011/10/continuous-integration-combining-jenkins-rail.html">Previous</a>
&nbsp; 
<a href="../../../index.html">Index</a>
&nbsp; 
<a href="../../../posts/2011/02/agile-the-pivotal-way.html">Next</a>
</div>
<div class='post'>
<div class='post_header'>
<h3>Jenkins/Hudson random tips - add password to 'database.yml' using 'sed'</h3>
<div class='post_info'>
<span class='post_time'>June 30 2011,  1:45 AM</span>
<span class='author'>&nbsp;by Panggi Libersa Jasri Akadol</span>
</div>
</div>
<div class='post_body'><p><div class='p_embed p_image_embed'>
<img src='../../../image/2011/06/28458023-sed.png'>
</div>
It's been a long time since the my last blog post :)&nbsp;</p>
<p>Ok, so i will start with a simple tips . I don't know about you guys, but in my team's Rails projects we made database_example.yml instead of database.yml in our repository ( SVN / git etc ) and write password there. The problem comes at the first time you make a job when the codes are downloaded from repository and you wanna start to build your project using "rake db:migrate" for migration .</p>
<p>Do you see the problem? yup.. the default rails configuration file for database is database.yml but the one that is downloaded from repository is database_example.yml and with no password inserted. And the result is "FAILURE" when building the job because the database.yml don't exist and database password is not filled yet.</p>
<p><strong>The Solution :</strong></p>
<ol>
<li>Search the text in the database_example.yml that contain "password:" and replace it with "password: yourpassword".</li>
<li>Save it to database.yml</li>
</ol>
<p>For those operations , we can use 'sed' command. We can use the sed command to change all occurrences of one string to another within a file, just like the search-and-replace feature of your word processor. The sed command can also delete a range of lines from a file. Since sed is a stream editor, it takes the file given as input, and sends the output to the screen, unless we redirect output to a file. In other words, sed does not change the input file.</p>
<p>For this case, see the code below :</p>
<script src="https://gist.github.com/1055857.js?file=sed.db.txt"></script>
<p>Put the code on your Jenkins Build step <strong>before</strong> running migration . enjoy :)</p></div>
<div class='post_tags'>
<h4>Tags</h4>
<div class='post_tags_list'>continuousintegration, hudson, jenkins, rails</div>
</div>
<div class='post_responses'>
<h4>1846 views and 1 response</h4>
<ul class='post_responses list'>
<li class='response clearfix'>
<div class='response_header'>
<div class='response_time'>May  1 2013, 12:23 AM</div>
<div class='response_name'>Andreas Ek responded:</div>
</div>
<div class='response_body'>Yes, but the challenge is to use the Jenkins parameters to the sed command!</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</body>
</html>
